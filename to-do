- ball detection
- made-shot detection
- shot detection

- crear minidataset para el made-shot detection

- arreglar team association, ya que hay veces que las asignaciones no son correctas, sobretodo con oclusiones:
	- añadir contexto, por ejemplo, teniendo en cuenta si al asociarlo al equipo contrario, el otro equipo ya tenia 
		los jugadores completos, y todos tienen mas "score" a la hora de asociar que el jugador tratado
		
- tambien arreglar donde se encuentran las asociaciones a un equipo, ya que esta informacion sera necesaria para 
	a que equipo se asigna una accion

- intentar entrenar la yolo-cls con el dataset de imagenes creado a partir del spacejam dataset
- ir grabando algunos videos de vez en cuando en las pistas con la gopro, para crear el dataset de:
	- shot
	- pass
	- ball
	- (pensar en alguno mas, si hace falta, ya que se crea el dataset)
	
- antes de todo, probar a entrenar yolov8m-cls ajustando el dataset de imagenes creado a partir del spacejam dataset,
	(de manera que queden como es indicado aqui: https://docs.ultralytics.com/datasets/classify/#dataset-format),
	y ver que tal dan los resultados
	
	
opciones de mejora de inferencia:
1- si en n clasificaciones seguidas dice que se ha realizado tal accion, entonces tomar como que se ha realizado esa accion
	- pros: 
		- mas robusto
	- contras: 
		- tarda n veces mas en hacer la inferencia
	
	posiblemente implementar con mayorias, de manera que si en las ultimas m inferencias (siendo m impar), la mayoria es una cierta clase, pues 
	asignar esa clase
	
	
opciones de mejora de velocidad de algoritmo:
1- hacer inferencia cada k frames, no cada frame, con la cola de frames
	- pros: 
		- mas rapido
		- posiblemente mas generalizado
	- contras: 
		- menos detallado


- preguntar sobre entrega 15 diciembre
- preguntar de nuevo sobre histograma de colores
	reducir espacio de colores a 3 bits de color (dividir por 32 el color r,g y b) dara un color mas basto
		el resultado será una matriz 3d, luego comparar con las plantillas
- preguntar sobre estructura del tfg
	- introduccion
	- diseño
	- planning y presupuesto
	- implementacion
	- test y resultados
	- conclusiones y trabajos futuros




seguramente no guarde mas partidos ni escenas porque una vez se guarda la primera, tenemos scene0 y game0 (dado que entra en la condicion == 0)
pero para la siguiente entra en el else, y hay 1 archivo, pero al hacer range(numberScenes / numberGames), solo coge el 0 porque empieza desde el 0,
pero al estar ya en la base de datos entonces no lo crea









TO-DO desde dic 15:

- grabar nuevos videos a 2k 60 fps
- ver como resulta algun preprocesado con los frames de videos fullhd - done
- cambiar la inferencia de la accion a n acciones seguidas entonces es accion final (n puede ser cualquier numero) - done
- implementar nuevo modelo de yolo con el reconocimiento de pelota y tiro - done
- deteccion de canasta encestada - done 
- combinar deteccion de tiro de la yolo y reconocimiento de tiro del r2plus1d para la inferencia
- documentacion
- incluir coordenadas de aro en la base de datos de cada escena - done
- dividir entre frame donde pintar y frame donde se hacen las inferencias - done
- guardar estadisticas de canastas encestadas

- mirar porque si el rebote del tiro sube demasiado y lo ultimo que ha visto es el centro entonces lo da
	por bueno, en vez de esperar a que baje
- para el reconocimiento de si la pelota ha entrado o no a canasta, igual tambien poner cuadrados arriba a la derecha y arriba a la izquierda



ESTRUCTURA DOCUMENTACION DESARROLLO APLICACION:
- Cambios respecto estructura inicial
- Introduccion + esquema de la pipeline + flowchart de la pipeline 

- Preparativos
	- Lenguaje de programacion
	- Librerias principales

- Interfaz grafica para generación de estadisticas y modulo datos de entrada
	- Coordenadas de los bordes		
	- Coordenadas de aro
	- Plantillas de equipacion en caso de haber varios equipos
		
- Segmentacion de campo
	- Explicacion (que es)
	- Objetivo (su uso)
	- Implementacion (como se ha hecho)

- Deteccion de objetos
	- Explicacion (que es)
	- Objetivo (su uso)
	- Estado del arte (cuales son los metodos actuales)
	- Implementacion (como se ha hecho)

- Modulo top-view
	- Explicacion (que es)
	- Objetivo (su uso)
	- Implementacion (como se ha hecho)

- Reconocimiento de accion
	- Explicacion (que es)
	- Objetivo (su uso)
	- Estado del arte (cuales son los metodos actuales)
	- Implementacion (como se ha hecho)

- Reconocimiento de jugador
	- Explicacion (que es)
	- Objetivo (su uso)
	- Implementacion (como se ha hecho)

- Analisis de accion
	- Explicacion (que es)
	- Objetivo (su uso)
	- Implementacion (como se ha hecho)

- Generacion de estadisticas, base de datos e interfaz grafica para visualizacion de estadisticas
	- Explicacion (que es)
	- Objetivo (su uso)
	- Implementacion (como se ha hecho)

	Mezclar correctamente estos 3 apartados



to-do:
- modificar diseño definitivo en vez de indicar los cambios


- probar nuevo metodo de tracking:
	- utilizar suma del error al cuadrado de las medias al igual que con las asociaciones de equipo
	- para una deteccion en concreto, en el siguiente frame asignar la bbox que tenga un gran porcentaje de IoU, y que la suma del error al cuadrado de las medias sea muy parecido 




